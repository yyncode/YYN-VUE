<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.yyn.news.mapper.NewsContentMapper">

    <resultMap type="NewsContent" id="NewsContentResult">
        <result property="newsId" column="news_id"/>
        <result property="newsTitle" column="news_title"/>
        <result property="newsDescription" column="news_description"/>
        <result property="newsPic" column="news_pic"/>
        <result property="newsContent" column="news_content"/>
        <result property="newsNavId" column="news_nav_id"/>
        <result property="status" column="status"/>
        <result property="isTop" column="is_top"/>
        <result property="auditStatus" column="audit_status"/>
        <result property="auditResult" column="audit_result"/>
        <result property="lookNum" column="look_num"/>
        <result property="createBy" column="create_by"/>
        <result property="createTime" column="create_time"/>
        <result property="updateBy" column="update_by"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <sql id="selectNewsContentVo">
        select news_id,
               news_title,
               news_description,
               news_pic,
               news_content,
               news_nav_id,
               status,
               is_top,
               audit_status,
               audit_result,
               look_num,
               create_by,
               create_time,
               update_by,
               update_time
        from news_content
    </sql>

    <select id="selectNewsContentList" parameterType="NewsContent" resultMap="NewsContentResult">
        <include refid="selectNewsContentVo"/>
        <where>
            <if test="newsTitle != null  and newsTitle != ''">and news_title like concat('%', #{newsTitle}, '%')</if>
            <if test="newsDescription != null  and newsDescription != ''">and news_description = #{newsDescription}</if>
            <if test="newsPic != null  and newsPic != ''">and news_pic = #{newsPic}</if>
            <if test="newsContent != null  and newsContent != ''">and news_content = #{newsContent}</if>
            <if test="newsNavId != null ">and news_nav_id = #{newsNavId}</if>
            <if test="status != null  and status != ''">and status = #{status}</if>
            <if test="isTop != null  and isTop != ''">and is_top = #{isTop}</if>
            <if test="auditStatus != null  and auditStatus != ''">and audit_status = #{auditStatus}</if>
            <if test="auditResult != null  and auditResult != ''">and audit_result = #{auditResult}</if>
            <if test="lookNum != null ">and look_num = #{lookNum}</if>
            <if test="createBy != null ">and create_by = #{createBy}</if>
        </where>
    </select>

    <select id="selectNewsContentByNewsId" parameterType="Long" resultMap="NewsContentResult">
        <include refid="selectNewsContentVo"/>
        where news_id = #{newsId}
    </select>
    <select id="queryNewsContentListByNavId" resultMap="NewsContentResult">
        <include refid="selectNewsContentVo"/>
        where news_nav_id = #{navId} and status = 1 and audit_status = 1 order by create_time desc
    </select>

    <insert id="insertNewsContent" parameterType="NewsContent" useGeneratedKeys="true" keyProperty="newsId">
        insert into news_content
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="newsTitle != null and newsTitle != ''">news_title,</if>
            <if test="newsDescription != null">news_description,</if>
            <if test="newsPic != null">news_pic,</if>
            <if test="newsContent != null and newsContent != ''">news_content,</if>
            <if test="newsNavId != null">news_nav_id,</if>
            <if test="status != null and status != ''">status,</if>
            <if test="isTop != null and isTop != ''">is_top,</if>
            <if test="auditStatus != null">audit_status,</if>
            <if test="auditResult != null">audit_result,</if>
            <if test="lookNum != null">look_num,</if>
            <if test="createBy != null">create_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="newsTitle != null and newsTitle != ''">#{newsTitle},</if>
            <if test="newsDescription != null">#{newsDescription},</if>
            <if test="newsPic != null">#{newsPic},</if>
            <if test="newsContent != null and newsContent != ''">#{newsContent},</if>
            <if test="newsNavId != null">#{newsNavId},</if>
            <if test="status != null and status != ''">#{status},</if>
            <if test="isTop != null and isTop != ''">#{isTop},</if>
            <if test="auditStatus != null">#{auditStatus},</if>
            <if test="auditResult != null">#{auditResult},</if>
            <if test="lookNum != null">#{lookNum},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
        </trim>
    </insert>

    <update id="updateNewsContent" parameterType="NewsContent">
        update news_content
        <trim prefix="SET" suffixOverrides=",">
            <if test="newsTitle != null and newsTitle != ''">news_title = #{newsTitle},</if>
            <if test="newsDescription != null">news_description = #{newsDescription},</if>
            <if test="newsPic != null">news_pic = #{newsPic},</if>
            <if test="newsContent != null and newsContent != ''">news_content = #{newsContent},</if>
            <if test="newsNavId != null">news_nav_id = #{newsNavId},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="isTop != null and isTop != ''">is_top = #{isTop},</if>
            <if test="auditStatus != null">audit_status = #{auditStatus},</if>
            <if test="auditResult != null">audit_result = #{auditResult},</if>
            <if test="lookNum != null">look_num = #{lookNum},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where news_id = #{newsId}
    </update>

    <delete id="deleteNewsContentByNewsId" parameterType="Long">
        delete
        from news_content
        where news_id = #{newsId}
    </delete>

    <delete id="deleteNewsContentByNewsIds" parameterType="String">
        delete from news_content where news_id in
        <foreach item="newsId" collection="array" open="(" separator="," close=")">
            #{newsId}
        </foreach>
    </delete>
</mapper>